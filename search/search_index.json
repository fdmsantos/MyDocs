{"config":{"lang":["en"],"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Welcome to My Personal Docks MkDocs Work In Progress","title":"Home"},{"location":"#welcome-to-my-personal-docks-mkdocs","text":"Work In Progress","title":"Welcome to My Personal Docks MkDocs"},{"location":"elk/admin/","text":"Deploy Docker-compose git clone https://github.com/maxyermayank/docker-compose-elasticsearch-kibana Know Errors Max virtual memory Desc: Max virtual memory areas vm.max_map_count [65530] likely too low, increase to at least [262144] sudo sysctl -w vm.max_map_count=262144 Forbidden Index x-read-only-allow-delete-api Link PUT .kibana/_settings { \"index\": { \"blocks\": { \"read_only_allow_delete\": \"false\" } } }","title":"Administration"},{"location":"elk/admin/#deploy","text":"","title":"Deploy"},{"location":"elk/admin/#docker-compose","text":"git clone https://github.com/maxyermayank/docker-compose-elasticsearch-kibana","title":"Docker-compose"},{"location":"elk/admin/#know-errors","text":"","title":"Know Errors"},{"location":"elk/admin/#max-virtual-memory","text":"Desc: Max virtual memory areas vm.max_map_count [65530] likely too low, increase to at least [262144] sudo sysctl -w vm.max_map_count=262144","title":"Max virtual memory"},{"location":"elk/admin/#forbidden-index-x-read-only-allow-delete-api","text":"Link PUT .kibana/_settings { \"index\": { \"blocks\": { \"read_only_allow_delete\": \"false\" } } }","title":"Forbidden Index x-read-only-allow-delete-api"},{"location":"elk/beats/","text":"Beats Creating Custom Creating New Beat Examples Know Errors bash: mage: command not found Use vendoring We recommend to use vendoring for your beat. This means the dependencies are put into your beat folder. The beats team currently uses govendor for vendoring. govendor init govendor update +e This will create a directory vendor inside your repository. To make sure all dependencies for the Makefile commands are loaded from the vendor directory, find the following line in your Makefile: ES_BEATS=${GOPATH}/src/github.com/elastic/beats Replace it with: ES_BEATS=./vendor/github.com/elastic/beats To Fetch: govendor fetch github.com/vmware/govmomi/^ +out","title":"Beats"},{"location":"elk/beats/#beats","text":"","title":"Beats"},{"location":"elk/beats/#creating-custom","text":"Creating New Beat Examples","title":"Creating Custom"},{"location":"elk/beats/#know-errors","text":"bash: mage: command not found","title":"Know Errors"},{"location":"elk/beats/#use-vendoring","text":"We recommend to use vendoring for your beat. This means the dependencies are put into your beat folder. The beats team currently uses govendor for vendoring. govendor init govendor update +e This will create a directory vendor inside your repository. To make sure all dependencies for the Makefile commands are loaded from the vendor directory, find the following line in your Makefile: ES_BEATS=${GOPATH}/src/github.com/elastic/beats Replace it with: ES_BEATS=./vendor/github.com/elastic/beats To Fetch: govendor fetch github.com/vmware/govmomi/^ +out","title":"Use vendoring"},{"location":"elk/kibana/","text":"Time Series Filters performancemanager.virtualmachines.metric.info.metric: \"cpu.usagemhz.average\" AND NOT performancemanager.virtualmachines.metric.sample.instance: \"*\" AND performancemanager.hosts.metric.sample.instance: \"*\" Timelion Expression .es(index=vspherebeat-emp-imopolis-*, timefield=performancemanager.datastoresclusters.metric.sample.timestamp, metric=sum:performancemanager.datastoresclusters.metric.sample.value,q=\"performancemanager.datastoresclusters.metric.info.metric: disk.provisioned.latest\").divide(1000000000).label(\"Disk Provisioned [TB]\").color(black).lines(fill=1,width=2).title(\"Capacity Assessment\"), .es(index=vspherebeat-emp-imopolis-*, timefield=performancemanager.datastoresclusters.metric.sample.timestamp, metric=sum:performancemanager.datastoresclusters.metaData.Storage.Capacity,q=\"performancemanager.datastoresclusters.metric.info.metric: disk.provisioned.latest\").divide(1000000000000).label(\"Total Capacity [TB]\").color(yellow).lines(fill=2,width=2), .es(index=vspherebeat-emp-imopolis-*, timefield=performancemanager.datastoresclusters.metric.sample.timestamp, metric=sum:performancemanager.datastoresclusters.metric.sample.value,q=\"performancemanager.datastoresclusters.metric.info.metric: disk.used.latest\").divide(1000000000).label(\"Disk Used [TB]\").color(green).lines(fill=3,width=1), .es(index=vspherebeat-emp-imopolis-*, timefield=performancemanager.datastoresclusters.metric.sample.timestamp, metric=sum:performancemanager.datastoresclusters.metaData.Storage.Capacity,q=\"performancemanager.datastoresclusters.metric.info.metric: disk.provisioned.latest\").divide(1000000000000).multiply(1.1).label(\"Provisioning Threshold [TB]\").color(red).lines(fill=0,width=3),","title":"Kibana"},{"location":"elk/kibana/#time-series","text":"","title":"Time Series"},{"location":"elk/kibana/#filters","text":"performancemanager.virtualmachines.metric.info.metric: \"cpu.usagemhz.average\" AND NOT performancemanager.virtualmachines.metric.sample.instance: \"*\" AND performancemanager.hosts.metric.sample.instance: \"*\"","title":"Filters"},{"location":"elk/kibana/#timelion","text":"","title":"Timelion"},{"location":"elk/kibana/#expression","text":".es(index=vspherebeat-emp-imopolis-*, timefield=performancemanager.datastoresclusters.metric.sample.timestamp, metric=sum:performancemanager.datastoresclusters.metric.sample.value,q=\"performancemanager.datastoresclusters.metric.info.metric: disk.provisioned.latest\").divide(1000000000).label(\"Disk Provisioned [TB]\").color(black).lines(fill=1,width=2).title(\"Capacity Assessment\"), .es(index=vspherebeat-emp-imopolis-*, timefield=performancemanager.datastoresclusters.metric.sample.timestamp, metric=sum:performancemanager.datastoresclusters.metaData.Storage.Capacity,q=\"performancemanager.datastoresclusters.metric.info.metric: disk.provisioned.latest\").divide(1000000000000).label(\"Total Capacity [TB]\").color(yellow).lines(fill=2,width=2), .es(index=vspherebeat-emp-imopolis-*, timefield=performancemanager.datastoresclusters.metric.sample.timestamp, metric=sum:performancemanager.datastoresclusters.metric.sample.value,q=\"performancemanager.datastoresclusters.metric.info.metric: disk.used.latest\").divide(1000000000).label(\"Disk Used [TB]\").color(green).lines(fill=3,width=1), .es(index=vspherebeat-emp-imopolis-*, timefield=performancemanager.datastoresclusters.metric.sample.timestamp, metric=sum:performancemanager.datastoresclusters.metaData.Storage.Capacity,q=\"performancemanager.datastoresclusters.metric.info.metric: disk.provisioned.latest\").divide(1000000000000).multiply(1.1).label(\"Provisioning Threshold [TB]\").color(red).lines(fill=0,width=3),","title":"Expression"},{"location":"elk/queries/","text":"Cluster Health GET /_cluster/health Allocation Errors Explain GET /_cluster/allocation/explain Nodes Stats GET /_nodes/stats Indices List GET /_cat/indices?v List with selected Column GET /_cat/indices?h=creation.date.string Create POST /{index}/_open Close POST /_all/_close Search All GET /vspherebeat/_search { \"query\": { \"match_all\": {} } } Field Match string GET /vspherebeat/_search { \"query\": { \"match\" : { \"performancemanager.hosts.metaData.name\": \"nsvwsdv001.mngt.local\" } } } Field doesn't match string GET /vspherebeat/_search { \"query\": { \"bool\": { \"must_not\": [ { \"match\": { \"performancemanager.virtualmachines.metaData.name\": \"WSTPMNGT007\" } } ] } } } Bool Query (Match and Not Match) GET /vspherebeat/_search { \"query\": { \"bool\": { \"must\": [ { \"match\": { \"performancemanager.virtualmachines.metaData.name\": \"APM-Server\" } }, { \"match\": { \"performancemanager.virtualmachines.metric.info.metric\": \"cpu.usage.average\" } } ], \"must_not\": [ { \"match\": { \"performancemanager.virtualmachines.metric.sample.instance\": \"*\" } } ] } } } Exists Specified Field GET /vspherebeat/_search { \"query\": { \"exists\": { \"field\": \"performancemanager.hosts\" } } } Unique Values from a field GET vspherebeat/_search { \"size\":\"0\", \"aggs\" : { \"uniq_hotsr\" : { \"terms\" : { \"field\" : \"performancemanager.hosts.metaData.name\" } } } } Total of unique values from a field GET /vspherebeat/_search { \"size\" : 0, \"aggs\" : { \"distinct_hots\" : { \"cardinality\" : { \"field\" : \"performancemanager.hosts.metaData.name\" } } } } Help Get Indices Columns GET /_cat/indices?help","title":"ESQueries"},{"location":"elk/queries/#cluster","text":"","title":"Cluster"},{"location":"elk/queries/#health","text":"GET /_cluster/health","title":"Health"},{"location":"elk/queries/#allocation-errors-explain","text":"GET /_cluster/allocation/explain","title":"Allocation Errors Explain"},{"location":"elk/queries/#nodes","text":"","title":"Nodes"},{"location":"elk/queries/#stats","text":"GET /_nodes/stats","title":"Stats"},{"location":"elk/queries/#indices","text":"","title":"Indices"},{"location":"elk/queries/#list","text":"GET /_cat/indices?v","title":"List"},{"location":"elk/queries/#list-with-selected-column","text":"GET /_cat/indices?h=creation.date.string","title":"List with selected Column"},{"location":"elk/queries/#create","text":"POST /{index}/_open","title":"Create"},{"location":"elk/queries/#close","text":"POST /_all/_close","title":"Close"},{"location":"elk/queries/#search","text":"","title":"Search"},{"location":"elk/queries/#all","text":"GET /vspherebeat/_search { \"query\": { \"match_all\": {} } }","title":"All"},{"location":"elk/queries/#field-match-string","text":"GET /vspherebeat/_search { \"query\": { \"match\" : { \"performancemanager.hosts.metaData.name\": \"nsvwsdv001.mngt.local\" } } }","title":"Field Match string"},{"location":"elk/queries/#field-doesnt-match-string","text":"GET /vspherebeat/_search { \"query\": { \"bool\": { \"must_not\": [ { \"match\": { \"performancemanager.virtualmachines.metaData.name\": \"WSTPMNGT007\" } } ] } } }","title":"Field doesn't match string"},{"location":"elk/queries/#bool-query-match-and-not-match","text":"GET /vspherebeat/_search { \"query\": { \"bool\": { \"must\": [ { \"match\": { \"performancemanager.virtualmachines.metaData.name\": \"APM-Server\" } }, { \"match\": { \"performancemanager.virtualmachines.metric.info.metric\": \"cpu.usage.average\" } } ], \"must_not\": [ { \"match\": { \"performancemanager.virtualmachines.metric.sample.instance\": \"*\" } } ] } } }","title":"Bool Query (Match and Not Match)"},{"location":"elk/queries/#exists-specified-field","text":"GET /vspherebeat/_search { \"query\": { \"exists\": { \"field\": \"performancemanager.hosts\" } } }","title":"Exists Specified Field"},{"location":"elk/queries/#unique-values-from-a-field","text":"GET vspherebeat/_search { \"size\":\"0\", \"aggs\" : { \"uniq_hotsr\" : { \"terms\" : { \"field\" : \"performancemanager.hosts.metaData.name\" } } } }","title":"Unique Values from a field"},{"location":"elk/queries/#total-of-unique-values-from-a-field","text":"GET /vspherebeat/_search { \"size\" : 0, \"aggs\" : { \"distinct_hots\" : { \"cardinality\" : { \"field\" : \"performancemanager.hosts.metaData.name\" } } } }","title":"Total of unique values from a field"},{"location":"elk/queries/#help","text":"","title":"Help"},{"location":"elk/queries/#get-indices-columns","text":"GET /_cat/indices?help","title":"Get Indices Columns"},{"location":"elk/snapshotsAndRestore/","text":"Snapshot Config Change parameter in elastic search config file for all nodes The path.repo needs to be a shared folder beetween the cluster path.repo: [\"/usr/share/elasticsearch/snapshots\"] Create PUT /_snapshot/{repository}/{snapshot}?wait_for_completion=true List all Snapshots from a repo GET /_cat/snapshots/{repository}?v&s=id Delete DELETE /_snapshot/{repository}/{snapshot} Repositories Create PUT /_snapshot/my_backup { \"type\": \"fs\", \"settings\": { \"location\": \"/usr/share/elasticsearch/snapshots/backup\" } } List GET /_cat/repositories?v GET /_snapshot/_all Delete DELETE /_snapshot/{repository} Restore Restore - Official Doc Restore From Snapshot POST /_snapshot/{repository}/{snapshot}/_restore","title":"Snapshots&Restore"},{"location":"elk/snapshotsAndRestore/#snapshot","text":"","title":"Snapshot"},{"location":"elk/snapshotsAndRestore/#config","text":"Change parameter in elastic search config file for all nodes The path.repo needs to be a shared folder beetween the cluster path.repo: [\"/usr/share/elasticsearch/snapshots\"]","title":"Config"},{"location":"elk/snapshotsAndRestore/#create","text":"PUT /_snapshot/{repository}/{snapshot}?wait_for_completion=true","title":"Create"},{"location":"elk/snapshotsAndRestore/#list-all-snapshots-from-a-repo","text":"GET /_cat/snapshots/{repository}?v&s=id","title":"List all Snapshots from a repo"},{"location":"elk/snapshotsAndRestore/#delete","text":"DELETE /_snapshot/{repository}/{snapshot}","title":"Delete"},{"location":"elk/snapshotsAndRestore/#repositories","text":"","title":"Repositories"},{"location":"elk/snapshotsAndRestore/#create_1","text":"PUT /_snapshot/my_backup { \"type\": \"fs\", \"settings\": { \"location\": \"/usr/share/elasticsearch/snapshots/backup\" } }","title":"Create"},{"location":"elk/snapshotsAndRestore/#list","text":"GET /_cat/repositories?v GET /_snapshot/_all","title":"List"},{"location":"elk/snapshotsAndRestore/#delete_1","text":"DELETE /_snapshot/{repository}","title":"Delete"},{"location":"elk/snapshotsAndRestore/#restore","text":"Restore - Official Doc","title":"Restore"},{"location":"elk/snapshotsAndRestore/#restore-from-snapshot","text":"POST /_snapshot/{repository}/{snapshot}/_restore","title":"Restore From Snapshot"},{"location":"unix/commands/","text":"Networking Netstat $ sudo netstat -nl -p tcp | grep 8123 $ sudo netstat -nl -p tcp | head SS ss -an | grep -i listen Who listen on Port lsof -i :8000 Test Remote Connection to port nc -v 10.240.100.18 2049 Services Start systemctl start kubelet.service systemctl status kubelet.service Journalctl journalctl -u kubelet.service Dirs Create Multiple Dirs mkdir -p {networking,compute,storage} Create Multiple Files in Multiple Dirs touch {networking,compute,storage}/{main.tf,variables.tf,outputs.tf} Find sudo find / -type f -name .gitconfig","title":"Commands"},{"location":"unix/commands/#networking","text":"","title":"Networking"},{"location":"unix/commands/#netstat","text":"$ sudo netstat -nl -p tcp | grep 8123 $ sudo netstat -nl -p tcp | head","title":"Netstat"},{"location":"unix/commands/#ss","text":"ss -an | grep -i listen","title":"SS"},{"location":"unix/commands/#who-listen-on-port","text":"lsof -i :8000","title":"Who listen on Port"},{"location":"unix/commands/#test-remote-connection-to-port","text":"nc -v 10.240.100.18 2049","title":"Test Remote Connection to port"},{"location":"unix/commands/#services","text":"","title":"Services"},{"location":"unix/commands/#start","text":"systemctl start kubelet.service systemctl status kubelet.service","title":"Start"},{"location":"unix/commands/#journalctl","text":"journalctl -u kubelet.service","title":"Journalctl"},{"location":"unix/commands/#dirs","text":"","title":"Dirs"},{"location":"unix/commands/#create-multiple-dirs","text":"mkdir -p {networking,compute,storage}","title":"Create Multiple Dirs"},{"location":"unix/commands/#create-multiple-files-in-multiple-dirs","text":"touch {networking,compute,storage}/{main.tf,variables.tf,outputs.tf}","title":"Create Multiple Files in Multiple Dirs"},{"location":"unix/commands/#find","text":"sudo find / -type f -name .gitconfig","title":"Find"},{"location":"unix/disks/","text":"Mount Disk List Devices fdisk -l Create Partition # fdisk /dev/sdb Command (m for help): n => Create Partition Partition type: p primary (0 primary, 0 extended, 4 free) e extended Command (m for help): p => Get partition Command (m for help): w => Write Format and Create Label # mkfs.xfs /dev/sdb1 -L elastic Mount # vi /etc/fstab LABEL=elastic /elastic xfs defaults 0 0 ## Add this line # mount -a Mount Share Disk Install NFS yum install -y nfs-utils systemctl enable nfs systemctl start nfs Master Configure Export # vi /etc/exports /snapshots *(rw) => Add Line # exportfs /snapshots <world> Enable Service firewall-cmd --add-service nfs --permanent firewall-cmd --permanent --add-service=rpc-bind firewall-cmd --permanent --add-service=mountd firewall-cmd --permanent --add-port=2049/tcp firewall-cmd --permanent --add-port=2049/udp firewall-cmd --reload Slaves # vi /etc/fstab 10.240.100.18:/snapshots /elastic/snapshots nfs _netdev,rw 0 0 # mount -a # mount | grep elastic","title":"Disks"},{"location":"unix/disks/#mount-disk","text":"","title":"Mount Disk"},{"location":"unix/disks/#list-devices","text":"fdisk -l","title":"List Devices"},{"location":"unix/disks/#create-partition","text":"# fdisk /dev/sdb Command (m for help): n => Create Partition Partition type: p primary (0 primary, 0 extended, 4 free) e extended Command (m for help): p => Get partition Command (m for help): w => Write","title":"Create Partition"},{"location":"unix/disks/#format-and-create-label","text":"# mkfs.xfs /dev/sdb1 -L elastic","title":"Format and Create Label"},{"location":"unix/disks/#mount","text":"# vi /etc/fstab LABEL=elastic /elastic xfs defaults 0 0 ## Add this line # mount -a","title":"Mount"},{"location":"unix/disks/#mount-share-disk","text":"","title":"Mount Share Disk"},{"location":"unix/disks/#install-nfs","text":"yum install -y nfs-utils systemctl enable nfs systemctl start nfs","title":"Install NFS"},{"location":"unix/disks/#master","text":"","title":"Master"},{"location":"unix/disks/#configure-export","text":"# vi /etc/exports /snapshots *(rw) => Add Line # exportfs /snapshots <world>","title":"Configure Export"},{"location":"unix/disks/#enable-service","text":"firewall-cmd --add-service nfs --permanent firewall-cmd --permanent --add-service=rpc-bind firewall-cmd --permanent --add-service=mountd firewall-cmd --permanent --add-port=2049/tcp firewall-cmd --permanent --add-port=2049/udp firewall-cmd --reload","title":"Enable Service"},{"location":"unix/disks/#slaves","text":"# vi /etc/fstab 10.240.100.18:/snapshots /elastic/snapshots nfs _netdev,rw 0 0 # mount -a # mount | grep elastic","title":"Slaves"},{"location":"unix/os/archlinux/","text":"Packages Packages Update Package sudo pacman -U <link - see above> Update corrupted or invalid database pacman-key --delete 91FFE0700E80619CEB73235CA88E23E377514E00 pacman-key --populate archlinux Resolve ICU Package Problem Link Download and Install old \"icu\" package; wget https://archive.archlinux.org/packages/i/icu/icu-62.1-1-x86_64.pkg.tar.xz sudo pacman -U icu-62.1-1-x86_64.pkg.tar.xz Copy all \"icu\" files to a backup directory; sudo mkdir /usr/lib/backup sudo cp -r /usr/lib/libicu* /usr/lib/backup/ Install new version of \"icu\" again; sudo pacman -U /var/cache/pacman/pkg/icu-62.1-1-x86_64.pkg.tar.xz Copy this three files back to /var/lib/ direcotry; sudo cp /var/lib/libicui18n.so.61 /usr/lib/ sudo cp /var/lib/libicuuc.so.61 /usr/lib/ sudo cp /var/lib/libicudata.so.61 /usr/lib/ You can now cleanup backup files; sudo rm -rf /var/lib/backup","title":"Archlinux"},{"location":"unix/os/archlinux/#packages","text":"Packages","title":"Packages"},{"location":"unix/os/archlinux/#update-package","text":"sudo pacman -U <link - see above>","title":"Update Package"},{"location":"unix/os/archlinux/#update-corrupted-or-invalid-database","text":"pacman-key --delete 91FFE0700E80619CEB73235CA88E23E377514E00 pacman-key --populate archlinux","title":"Update corrupted or invalid database"},{"location":"unix/os/archlinux/#resolve-icu-package-problem","text":"Link Download and Install old \"icu\" package; wget https://archive.archlinux.org/packages/i/icu/icu-62.1-1-x86_64.pkg.tar.xz sudo pacman -U icu-62.1-1-x86_64.pkg.tar.xz Copy all \"icu\" files to a backup directory; sudo mkdir /usr/lib/backup sudo cp -r /usr/lib/libicu* /usr/lib/backup/ Install new version of \"icu\" again; sudo pacman -U /var/cache/pacman/pkg/icu-62.1-1-x86_64.pkg.tar.xz Copy this three files back to /var/lib/ direcotry; sudo cp /var/lib/libicui18n.so.61 /usr/lib/ sudo cp /var/lib/libicuuc.so.61 /usr/lib/ sudo cp /var/lib/libicudata.so.61 /usr/lib/ You can now cleanup backup files; sudo rm -rf /var/lib/backup","title":"Resolve ICU Package Problem"},{"location":"unix/os/redhat/","text":"Recover Root Password Na console send ctrl-alt-del press \"e\" => TO Edit Na linha linux16 -- No final da linha adicionar rd.break press \"ctrl-x\" mount -o remount,rw /sysroot cd /sysroot chroot . touch .autorelabel passwd teste123ibm4 ctrl d ctrl d Permit SSH Root Login vi /etc/ssh/sshd_config # Comment PasswordAuthentication no # Descomment PasswordAuthentication yes systemctl restart sshd Configure Network Interface vi /etc/sysconfig/network-scripts/ifcfg-eth0 IPADDR=172.16.1.180 GATEWAY=172.16.1.16 DNS1=172.16.1.112 DNS2=172.16.1.119 systemctl restart network","title":"Redhat"},{"location":"unix/os/redhat/#recover-root-password","text":"Na console send ctrl-alt-del press \"e\" => TO Edit Na linha linux16 -- No final da linha adicionar rd.break press \"ctrl-x\" mount -o remount,rw /sysroot cd /sysroot chroot . touch .autorelabel passwd teste123ibm4 ctrl d ctrl d","title":"Recover Root Password"},{"location":"unix/os/redhat/#permit-ssh-root-login","text":"vi /etc/ssh/sshd_config # Comment PasswordAuthentication no # Descomment PasswordAuthentication yes systemctl restart sshd","title":"Permit SSH Root Login"},{"location":"unix/os/redhat/#configure-network-interface","text":"vi /etc/sysconfig/network-scripts/ifcfg-eth0 IPADDR=172.16.1.180 GATEWAY=172.16.1.16 DNS1=172.16.1.112 DNS2=172.16.1.119 systemctl restart network","title":"Configure Network Interface"},{"location":"unix/os/ubuntu/","text":"Know Errors Unable to lock the administration directory Desc: Unable to lock the administration directory (/var/lib/dpkg/) is another process using it? Solution sudo rm /var/lib/apt/lists/lock","title":"Ubuntu"},{"location":"unix/os/ubuntu/#know-errors","text":"","title":"Know Errors"},{"location":"unix/os/ubuntu/#unable-to-lock-the-administration-directory","text":"Desc: Unable to lock the administration directory (/var/lib/dpkg/) is another process using it? Solution sudo rm /var/lib/apt/lists/lock","title":"Unable to lock the administration directory"},{"location":"unix/software/php/","text":"Install Lamp Server https://www.howtoforge.com/tutorial/centos-lamp-server-apache-mysql-php/ Ioncube Loader https://www.howtoforge.com/tutorial/how-to-install-ioncube-loader/ Cli Get Modules php -m","title":"PHP"},{"location":"unix/software/php/#install","text":"","title":"Install"},{"location":"unix/software/php/#lamp-server","text":"https://www.howtoforge.com/tutorial/centos-lamp-server-apache-mysql-php/","title":"Lamp Server"},{"location":"unix/software/php/#ioncube-loader","text":"https://www.howtoforge.com/tutorial/how-to-install-ioncube-loader/","title":"Ioncube Loader"},{"location":"unix/software/php/#cli","text":"","title":"Cli"},{"location":"unix/software/php/#get-modules","text":"php -m","title":"Get Modules"},{"location":"unix/software/virsh/","text":"VM Snapshot $ ssh -l rgameiro 10.242.12.23 $ virsh list --all Id Name State ---------------------------------------------------- 1 bm02vsc01 running 2 bm02alinternal01 running 3 architect running 4 bm02ifwinternal01 running 5 bm02vsd01 running 6 bm02sfinternal02 running 7 bm02acinternal01 running 8 bm02dirinternal01 running - bm02nes01 shut off $ virsh destroy bm02sfinternal02 $ virsh dumpxml bm02sfinternal02 # Find Disk File <domain type='kvm'> <name>bm02sfinternal02</name> <uuid>af7d246d-4578-4660-96fa-ac40c87c24eb</uuid> <memory unit='KiB'>2097152</memory> <currentMemory unit='KiB'>2097152</currentMemory> <vcpu placement='static'>4</vcpu> <os> <type arch='x86_64' machine='pc-i440fx-rhel7.3.0'>hvm</type> <boot dev='hd'/> </os> <features> <acpi/> <apic/> <vmport state='off'/> </features> <cpu mode='host-model' check='partial'> <model fallback='allow'/> </cpu> <clock offset='utc'> <timer name='rtc' tickpolicy='catchup'/> <timer name='pit' tickpolicy='delay'/> <timer name='hpet' present='no'/> </clock> <on_poweroff>destroy</on_poweroff> <on_reboot>restart</on_reboot> <on_crash>restart</on_crash> <pm> <suspend-to-mem enabled='no'/> <suspend-to-disk enabled='no'/> </pm> <devices> <emulator>/usr/libexec/qemu-kvm</emulator> <disk type='file' device='disk'> <driver name='qemu' type='qcow2' cache='none' io='native'/> <source file='/var/lib/libvirt/images/bm02sfinternal02.qcow2'/> <target dev='vda' bus='virtio'/> <address type='pci' domain='0x0000' bus='0x00' slot='0x06' function='0x0'/> </disk> <disk type='file' device='cdrom'> <driver name='qemu' type='raw'/> <target dev='hda' bus='ide'/> <readonly/> <address type='drive' controller='0' bus='0' target='0' unit='0'/> </disk> <controller type='usb' index='0' model='ich9-ehci1'> <address type='pci' domain='0x0000' bus='0x00' slot='0x05' function='0x7'/> </controller> <controller type='usb' index='0' model='ich9-uhci1'> <master startport='0'/> <address type='pci' domain='0x0000' bus='0x00' slot='0x05' function='0x0' multifunction='on'/> </controller> <controller type='usb' index='0' model='ich9-uhci2'> <master startport='2'/> <address type='pci' domain='0x0000' bus='0x00' slot='0x05' function='0x1'/> </controller> <controller type='usb' index='0' model='ich9-uhci3'> <master startport='4'/> <address type='pci' domain='0x0000' bus='0x00' slot='0x05' function='0x2'/> </controller> <controller type='pci' index='0' model='pci-root'/> <controller type='ide' index='0'> <address type='pci' domain='0x0000' bus='0x00' slot='0x01' function='0x1'/> </controller> <controller type='virtio-serial' index='0'> <address type='pci' domain='0x0000' bus='0x00' slot='0x04' function='0x0'/> </controller> <interface type='bridge'> <mac address='52:54:00:84:7e:d0'/> <source bridge='br100'/> <model type='virtio'/> <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/> </interface> <serial type='pty'> <target type='isa-serial' port='0'> <model name='isa-serial'/> </target> </serial> <console type='pty'> <target type='serial' port='0'/> </console> <channel type='unix'> <target type='virtio' name='org.qemu.guest_agent.0'/> <address type='virtio-serial' controller='0' bus='0' port='1'/> </channel> <channel type='spicevmc'> <target type='virtio' name='com.redhat.spice.0'/> <address type='virtio-serial' controller='0' bus='0' port='2'/> </channel> <input type='tablet' bus='usb'> <address type='usb' bus='0' port='1'/> </input> <input type='mouse' bus='ps2'/> <input type='keyboard' bus='ps2'/> <graphics type='spice' autoport='yes'> <listen type='address'/> </graphics> <video> <model type='qxl' ram='65536' vram='65536' vgamem='16384' heads='1' primary='yes'/> <address type='pci' domain='0x0000' bus='0x00' slot='0x02' function='0x0'/> </video> <redirdev bus='usb' type='spicevmc'> <address type='usb' bus='0' port='2'/> </redirdev> <redirdev bus='usb' type='spicevmc'> <address type='usb' bus='0' port='3'/> </redirdev> <memballoon model='virtio'> <address type='pci' domain='0x0000' bus='0x00' slot='0x07' function='0x0'/> </memballoon> </devices> </domain> $ ls -la /var/lib/libvirt/images/bm02sfinternal02.qcow2 $ df -B 1g # Ensure we have space to copy disk $ cp /var/lib/libvirt/images/bm02sfinternal02.qcow2 /var/lib/libvirt/images/bm02sfinternal02-pre-php-upgrade.qcow2 $ bg # Por o Processo em Brackground $ ls -la /var/lib/libvirt/images/bm02sfinternal02-pre-php-upgrade.qcow2 rw------- 1 root root 17607884800 Oct 30 08:21 /var/lib/libvirt/images/bm02sfinternal02-pre-php-upgrade.qcow2 $ ls -la /var/lib/libvirt/images/bm02sfinternal02-pre-php-upgrade.qcow2 # Terminou [1]+ Done cp -i /var/lib/libvirt/images/bm02sfinternal02.qcow2 /var/lib/libvirt/images/bm02sfinternal02-pre-php-upgrade.qcow2 $ ls -la /var/lib/libvirt/images/bm02sfinternal02* $ virsh start bm02sfinternal02","title":"Virsh"},{"location":"unix/software/virsh/#vm","text":"","title":"VM"},{"location":"unix/software/virsh/#snapshot","text":"$ ssh -l rgameiro 10.242.12.23 $ virsh list --all Id Name State ---------------------------------------------------- 1 bm02vsc01 running 2 bm02alinternal01 running 3 architect running 4 bm02ifwinternal01 running 5 bm02vsd01 running 6 bm02sfinternal02 running 7 bm02acinternal01 running 8 bm02dirinternal01 running - bm02nes01 shut off $ virsh destroy bm02sfinternal02 $ virsh dumpxml bm02sfinternal02 # Find Disk File <domain type='kvm'> <name>bm02sfinternal02</name> <uuid>af7d246d-4578-4660-96fa-ac40c87c24eb</uuid> <memory unit='KiB'>2097152</memory> <currentMemory unit='KiB'>2097152</currentMemory> <vcpu placement='static'>4</vcpu> <os> <type arch='x86_64' machine='pc-i440fx-rhel7.3.0'>hvm</type> <boot dev='hd'/> </os> <features> <acpi/> <apic/> <vmport state='off'/> </features> <cpu mode='host-model' check='partial'> <model fallback='allow'/> </cpu> <clock offset='utc'> <timer name='rtc' tickpolicy='catchup'/> <timer name='pit' tickpolicy='delay'/> <timer name='hpet' present='no'/> </clock> <on_poweroff>destroy</on_poweroff> <on_reboot>restart</on_reboot> <on_crash>restart</on_crash> <pm> <suspend-to-mem enabled='no'/> <suspend-to-disk enabled='no'/> </pm> <devices> <emulator>/usr/libexec/qemu-kvm</emulator> <disk type='file' device='disk'> <driver name='qemu' type='qcow2' cache='none' io='native'/> <source file='/var/lib/libvirt/images/bm02sfinternal02.qcow2'/> <target dev='vda' bus='virtio'/> <address type='pci' domain='0x0000' bus='0x00' slot='0x06' function='0x0'/> </disk> <disk type='file' device='cdrom'> <driver name='qemu' type='raw'/> <target dev='hda' bus='ide'/> <readonly/> <address type='drive' controller='0' bus='0' target='0' unit='0'/> </disk> <controller type='usb' index='0' model='ich9-ehci1'> <address type='pci' domain='0x0000' bus='0x00' slot='0x05' function='0x7'/> </controller> <controller type='usb' index='0' model='ich9-uhci1'> <master startport='0'/> <address type='pci' domain='0x0000' bus='0x00' slot='0x05' function='0x0' multifunction='on'/> </controller> <controller type='usb' index='0' model='ich9-uhci2'> <master startport='2'/> <address type='pci' domain='0x0000' bus='0x00' slot='0x05' function='0x1'/> </controller> <controller type='usb' index='0' model='ich9-uhci3'> <master startport='4'/> <address type='pci' domain='0x0000' bus='0x00' slot='0x05' function='0x2'/> </controller> <controller type='pci' index='0' model='pci-root'/> <controller type='ide' index='0'> <address type='pci' domain='0x0000' bus='0x00' slot='0x01' function='0x1'/> </controller> <controller type='virtio-serial' index='0'> <address type='pci' domain='0x0000' bus='0x00' slot='0x04' function='0x0'/> </controller> <interface type='bridge'> <mac address='52:54:00:84:7e:d0'/> <source bridge='br100'/> <model type='virtio'/> <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/> </interface> <serial type='pty'> <target type='isa-serial' port='0'> <model name='isa-serial'/> </target> </serial> <console type='pty'> <target type='serial' port='0'/> </console> <channel type='unix'> <target type='virtio' name='org.qemu.guest_agent.0'/> <address type='virtio-serial' controller='0' bus='0' port='1'/> </channel> <channel type='spicevmc'> <target type='virtio' name='com.redhat.spice.0'/> <address type='virtio-serial' controller='0' bus='0' port='2'/> </channel> <input type='tablet' bus='usb'> <address type='usb' bus='0' port='1'/> </input> <input type='mouse' bus='ps2'/> <input type='keyboard' bus='ps2'/> <graphics type='spice' autoport='yes'> <listen type='address'/> </graphics> <video> <model type='qxl' ram='65536' vram='65536' vgamem='16384' heads='1' primary='yes'/> <address type='pci' domain='0x0000' bus='0x00' slot='0x02' function='0x0'/> </video> <redirdev bus='usb' type='spicevmc'> <address type='usb' bus='0' port='2'/> </redirdev> <redirdev bus='usb' type='spicevmc'> <address type='usb' bus='0' port='3'/> </redirdev> <memballoon model='virtio'> <address type='pci' domain='0x0000' bus='0x00' slot='0x07' function='0x0'/> </memballoon> </devices> </domain> $ ls -la /var/lib/libvirt/images/bm02sfinternal02.qcow2 $ df -B 1g # Ensure we have space to copy disk $ cp /var/lib/libvirt/images/bm02sfinternal02.qcow2 /var/lib/libvirt/images/bm02sfinternal02-pre-php-upgrade.qcow2 $ bg # Por o Processo em Brackground $ ls -la /var/lib/libvirt/images/bm02sfinternal02-pre-php-upgrade.qcow2 rw------- 1 root root 17607884800 Oct 30 08:21 /var/lib/libvirt/images/bm02sfinternal02-pre-php-upgrade.qcow2 $ ls -la /var/lib/libvirt/images/bm02sfinternal02-pre-php-upgrade.qcow2 # Terminou [1]+ Done cp -i /var/lib/libvirt/images/bm02sfinternal02.qcow2 /var/lib/libvirt/images/bm02sfinternal02-pre-php-upgrade.qcow2 $ ls -la /var/lib/libvirt/images/bm02sfinternal02* $ virsh start bm02sfinternal02","title":"Snapshot"}]}